"use strict";(self.webpackChunklimo_cobot_documentation=self.webpackChunklimo_cobot_documentation||[]).push([[1924],{62609:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>j,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"system-components/object-detection-node","title":"Object Detection Node","description":"The Object Detection Node is the vision brain of your robot \u2014 it processes images from the onboard camera, detects objects using YOLOv8, estimates their positions, and publishes them to ROS2 so other nodes (like navigation and manipulation) can act.","source":"@site/docs/system-components/object-detection-node.md","sourceDirName":"system-components","slug":"/system-components/object-detection-node","permalink":"/limo_cobot_documentation/docs/system-components/object-detection-node","draft":false,"unlisted":false,"editUrl":"https://github.com/krish-rRay23/limo_cobot_documentation/tree/main/docs/system-components/object-detection-node.md","tags":[],"version":"current","lastUpdatedBy":"Krish Ray","lastUpdatedAt":1754642109000,"sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"Object Detection Node"},"sidebar":"tutorialSidebar","previous":{"title":"System Components Overview","permalink":"/limo_cobot_documentation/docs/system-components/overview"},"next":{"title":"Mission Manager Node","permalink":"/limo_cobot_documentation/docs/system-components/mission-manager"}}');var o=t(74848),i=t(28453),r=t(27293);t(11470),t(19365);const c={sidebar_position:7,title:"Object Detection Node"},l="\ud83d\udfe9 Object Detection Node",d={},a=[{value:"\ud83d\udd0d What It Does &amp; How It Works",id:"-what-it-does--how-it-works",level:2},{value:"\u2699\ufe0f Setup &amp; Configuration",id:"\ufe0f-setup--configuration",level:2},{value:"<strong>1. Requirements</strong>",id:"1-requirements",level:3},{value:"<strong>2. Installation</strong>",id:"2-installation",level:3},{value:"<strong>3. Configuration Parameters</strong>",id:"3-configuration-parameters",level:3},{value:"\u25b6\ufe0f Usage Instructions",id:"\ufe0f-usage-instructions",level:2},{value:"\ud83c\udfaf Training Your Own YOLO Model",id:"-training-your-own-yolo-model",level:2},{value:"<strong>1. Collect Images</strong>",id:"1-collect-images",level:3},{value:"<strong>2. Label Data</strong>",id:"2-label-data",level:3},{value:"<strong>3. Train YOLOv8</strong>",id:"3-train-yolov8",level:3},{value:"<strong>4. Deploy Weights</strong>",id:"4-deploy-weights",level:3},{value:"\ud83d\udee0 Troubleshooting Tips",id:"-troubleshooting-tips",level:2},{value:"\ud83d\udcda Learn More",id:"-learn-more",level:2},{value:"\ud83c\udfaf Next Steps",id:"-next-steps",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"-object-detection-node",children:"\ud83d\udfe9 Object Detection Node"})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.strong,{children:"Object Detection Node"})," is the vision brain of your robot \u2014 it processes images from the onboard camera, detects objects using YOLOv8, estimates their positions, and publishes them to ROS2 so other nodes (like navigation and manipulation) can act."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-what-it-does--how-it-works",children:"\ud83d\udd0d What It Does & How It Works"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Subscribes"})," to RGB and depth image topics from the Orbbec DaBai depth camera."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Runs YOLOv8 inference"})," on each frame to detect objects in real time."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Estimates 3D positions"})," of detected objects using depth data."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Publishes detections"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/target_pose"})," \u2192 ",(0,o.jsx)(n.code,{children:"geometry_msgs/PoseStamped"})," (used by Mission Manager & Navigation)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/detections"})," \u2192 list of bounding boxes, class names, confidence scores"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/image_bbox"})," \u2192 image with overlayed detection boxes and labels"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.mermaid,{value:'flowchart LR\r\n    Camera["Depth Camera"] --\x3e Detector["YOLOv8 Node"]\r\n    Detector --\x3e Pose["/target_pose<br/>(PoseStamped)"]\r\n    Detector --\x3e Boxes["/detections<br/>(bbox/class/conf)"]\r\n    Detector --\x3e Overlay["/image_bbox<br/>(annotated image)"]\r\n    Pose --\x3e MissionManager["Mission Manager"]'}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"\ufe0f-setup--configuration",children:"\u2699\ufe0f Setup & Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"1-requirements",children:(0,o.jsx)(n.strong,{children:"1. Requirements"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Python \u2265 3.8"}),"\n",(0,o.jsx)(n.li,{children:"ROS2 Foxy workspace"}),"\n",(0,o.jsx)(n.li,{children:"Ultralytics YOLOv8 installed"}),"\n",(0,o.jsx)(n.li,{children:"Depth camera drivers running"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"2-installation",children:(0,o.jsx)(n.strong,{children:"2. Installation"})}),"\n",(0,o.jsx)(n.p,{children:"Clone the object detector package into your workspace:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd ~/limo_ws/src\r\ngit clone https://github.com/your-org/object_detector.git\r\ncd ~/limo_ws\r\ncolcon build\r\nsource install/setup.bash\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-configuration-parameters",children:(0,o.jsx)(n.strong,{children:"3. Configuration Parameters"})}),"\n",(0,o.jsxs)(n.p,{children:["Inside ",(0,o.jsx)(n.code,{children:"object_detector.py"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'MIN_DEPTH_METERS = 0.15     # Ignore objects closer than 15cm\r\nMAX_DEPTH_METERS = 4.0      # Ignore objects further than 4m\r\nAPPROACH_DIST   = 0.30      # Distance to stop before object\r\nYOLO_WEIGHTS    = "runs/detect/train/weights/best.pt"\n'})}),"\n",(0,o.jsx)(n.p,{children:"You can adjust these values in the launch file or node parameters."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"\ufe0f-usage-instructions",children:"\u25b6\ufe0f Usage Instructions"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Start the camera drivers:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 launch orbbec_camera dabai.launch.py\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Run the Object Detection Node:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 run object_detector object_detector_node\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Verify outputs:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["View annotated detections in RViz or ",(0,o.jsx)(n.code,{children:"rqt_image_view"})]}),"\n",(0,o.jsx)(n.li,{children:"Monitor detection topic:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /detections\n"})}),"\n",(0,o.jsx)(r.A,{type:"tip",title:"Pro Tip",children:(0,o.jsxs)(n.p,{children:["For full autonomous mode, launch with ",(0,o.jsx)(n.code,{children:"full_system.launch.py"})," \u2014 it will auto-start the detector and integrate with navigation/manipulation."]})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-training-your-own-yolo-model",children:"\ud83c\udfaf Training Your Own YOLO Model"}),"\n",(0,o.jsx)(n.p,{children:"To detect new objects:"}),"\n",(0,o.jsx)(n.h3,{id:"1-collect-images",children:(0,o.jsx)(n.strong,{children:"1. Collect Images"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Use the robot camera or a smartphone"}),"\n",(0,o.jsx)(n.li,{children:"Capture from multiple angles, lighting conditions, and distances"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"2-label-data",children:(0,o.jsx)(n.strong,{children:"2. Label Data"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Use LabelImg or Roboflow"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"3-train-yolov8",children:(0,o.jsx)(n.strong,{children:"3. Train YOLOv8"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"yolo task=detect mode=train model=yolov8n.pt data=your_data.yaml epochs=50 imgsz=640\n"})}),"\n",(0,o.jsx)(n.h3,{id:"4-deploy-weights",children:(0,o.jsx)(n.strong,{children:"4. Deploy Weights"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Copy ",(0,o.jsx)(n.code,{children:"best.pt"})," to the robot"]}),"\n",(0,o.jsxs)(n.li,{children:["Update ",(0,o.jsx)(n.code,{children:"YOLO_WEIGHTS"})," path in ",(0,o.jsx)(n.code,{children:"object_detector.py"})," or launch file"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-troubleshooting-tips",children:"\ud83d\udee0 Troubleshooting Tips"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Problem"}),(0,o.jsx)(n.th,{children:"Possible Cause"}),(0,o.jsx)(n.th,{children:"Solution"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"No detections"}),(0,o.jsx)(n.td,{children:"Wrong weights or incorrect camera topic"}),(0,o.jsxs)(n.td,{children:["Check ",(0,o.jsx)(n.code,{children:"YOLO_WEIGHTS"})," path & camera topics"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Poor accuracy"}),(0,o.jsx)(n.td,{children:"Dataset too small / poorly labeled"}),(0,o.jsx)(n.td,{children:"Collect more varied training data"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Depth pose is wrong"}),(0,o.jsx)(n.td,{children:"Depth/RGB not synced"}),(0,o.jsx)(n.td,{children:"Use message filters for synchronized topics"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Slow FPS"}),(0,o.jsx)(n.td,{children:"Model too large for hardware"}),(0,o.jsxs)(n.td,{children:["Use smaller YOLO model (e.g., ",(0,o.jsx)(n.code,{children:"yolov8n.pt"}),")"]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Node crashes on startup"}),(0,o.jsx)(n.td,{children:"Missing dependencies"}),(0,o.jsx)(n.td,{children:"Reinstall ultralytics & required packages"})]})]})]}),"\n",(0,o.jsx)(r.A,{type:"warning",title:"Important",children:(0,o.jsx)(n.p,{children:"Always verify your depth alignment and TF transforms \u2014 incorrect transforms will cause wrong navigation goals."})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-learn-more",children:"\ud83d\udcda Learn More"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://docs.ultralytics.com/",children:"Ultralytics YOLOv8 Docs"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://github.com/ros-perception/image_transport_tutorials",children:"ROS2 Image Transport"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://docs.ros.org/en/foxy/Tutorials/Custom-ROS2-Interfaces.html",children:"ROS2 Custom Messages"})}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-next-steps",children:"\ud83c\udfaf Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/limo_cobot_documentation/docs/core-concepts/object-detection",children:"Object Detection Pipeline"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/limo_cobot_documentation/docs/core-concepts/system-integration",children:"System Integration"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/limo_cobot_documentation/docs/advanced-usage/waypoint-management",children:"Pick & Place with Detected Objects"})}),"\n"]})]})}function j(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);