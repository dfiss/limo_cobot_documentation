"use strict";(self.webpackChunklimo_cobot_documentation=self.webpackChunklimo_cobot_documentation||[]).push([[5862],{59466:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>h,contentTitle:()=>a,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>x});const s=JSON.parse('{"id":"system-components/mission-manager","title":"Mission Manager Node","description":"The Mission Manager Node is the central coordinator \u2014 it decides what the robot should do next, manages state transitions, and ensures smooth integration between perception, navigation, and manipulation.","source":"@site/docs/system-components/mission-manager.md","sourceDirName":"system-components","slug":"/system-components/mission-manager","permalink":"/limo_cobot_documentation/docs/system-components/mission-manager","draft":false,"unlisted":false,"editUrl":"https://github.com/krish-rRay23/limo_cobot_documentation/tree/main/docs/system-components/mission-manager.md","tags":[],"version":"current","lastUpdatedBy":"Krish Ray","lastUpdatedAt":1754642109000,"sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"Mission Manager Node"},"sidebar":"tutorialSidebar","previous":{"title":"Object Detection Node","permalink":"/limo_cobot_documentation/docs/system-components/object-detection-node"},"next":{"title":"Pick Node","permalink":"/limo_cobot_documentation/docs/system-components/pick-node"}}');var t=i(74848),r=i(28453),o=i(27293),d=i(11470),c=i(19365);const l={sidebar_position:8,title:"Mission Manager Node"},a="\ud83e\udde0 Mission Manager Node",h={},x=[{value:"\ud83d\udd04 State Machine Overview",id:"-state-machine-overview",level:2},{value:"\ud83d\udea8 Interrupt Logic",id:"-interrupt-logic",level:2},{value:"\ud83d\udee0 System Orchestration",id:"-system-orchestration",level:2},{value:"\u2699\ufe0f Configuration Options",id:"\ufe0f-configuration-options",level:2},{value:"\ud83d\udcdc Sample Output &amp; Logs",id:"-sample-output--logs",level:2},{value:"\ud83e\udde9 Integration Points",id:"-integration-points",level:2},{value:"\ud83d\udee0 Troubleshooting",id:"-troubleshooting",level:2},{value:"\ud83d\udcda Learn More",id:"-learn-more",level:2},{value:"\ud83c\udfaf Next Steps",id:"-next-steps",level:2}];function j(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-mission-manager-node",children:"\ud83e\udde0 Mission Manager Node"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"Mission Manager Node"})," is the central coordinator \u2014 it decides ",(0,t.jsx)(n.strong,{children:"what the robot should do next"}),", manages state transitions, and ensures smooth integration between perception, navigation, and manipulation."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-state-machine-overview",children:"\ud83d\udd04 State Machine Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The Mission Manager operates as a ",(0,t.jsx)(n.strong,{children:"finite state machine (FSM)"}),".",(0,t.jsx)(n.br,{}),"\n","Each state represents a high-level behavior, with transitions triggered by events like detections, goal completions, or errors."]}),"\n",(0,t.jsx)(n.mermaid,{value:"stateDiagram-v2\r\n    [*] --\x3e Idle\r\n    Idle --\x3e Exploring : Start Mission\r\n    Exploring --\x3e ObjectDetected : /target_pose received\r\n    ObjectDetected --\x3e NavigatingToObject : Send goal to Nav2\r\n    NavigatingToObject --\x3e Picking : Goal reached\r\n    Picking --\x3e ReturningToBase : Pick success\r\n    ReturningToBase --\x3e Dropping : Goal reached\r\n    Dropping --\x3e Exploring : Drop success & more waypoints\r\n    Dropping --\x3e Idle : Mission complete\r\n    NavigatingToObject --\x3e Exploring : Goal failed\r\n    Picking --\x3e Exploring : Pick failed"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-interrupt-logic",children:"\ud83d\udea8 Interrupt Logic"}),"\n",(0,t.jsxs)(n.p,{children:["The Mission Manager can ",(0,t.jsx)(n.strong,{children:"interrupt ongoing navigation"})," when:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A valid ",(0,t.jsx)(n.code,{children:"/target_pose"})," is published by the Object Detector"]}),"\n",(0,t.jsx)(n.li,{children:"The detected object matches configured class filters"}),"\n",(0,t.jsx)(n.li,{children:"Confidence exceeds a threshold"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Interrupt flow:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Cancel current waypoint navigation"}),"\n",(0,t.jsx)(n.li,{children:"Store the interrupted goal (optional resume)"}),"\n",(0,t.jsx)(n.li,{children:"Send navigation goal to the detected object's position"}),"\n",(0,t.jsx)(n.li,{children:"After pick/drop, return to base or resume waypoints"}),"\n"]}),"\n",(0,t.jsx)(o.A,{type:"info",title:"Pro Tip",children:(0,t.jsx)(n.p,{children:"Interrupts are rate-limited \u2014 if multiple detections occur quickly, only the most recent high-confidence one is used."})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-system-orchestration",children:"\ud83d\udee0 System Orchestration"}),"\n",(0,t.jsx)(n.p,{children:"The Mission Manager coordinates:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Task"}),(0,t.jsx)(n.th,{children:"How It's Done"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Exploration"})}),(0,t.jsx)(n.td,{children:"Sends sequential waypoint goals to Nav2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Object Handling"})}),(0,t.jsxs)(n.td,{children:["Listens for ",(0,t.jsx)(n.code,{children:"/target_pose"})," from Object Detector"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Navigation Control"})}),(0,t.jsxs)(n.td,{children:["Uses ",(0,t.jsx)(n.code,{children:"nav2_msgs/action/NavigateToPose"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Pick/Place Control"})}),(0,t.jsx)(n.td,{children:"Sends triggers to Pick & Drop Nodes"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"State Feedback"})}),(0,t.jsx)(n.td,{children:"Logs progress and plays audio feedback (optional)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Error Recovery"})}),(0,t.jsx)(n.td,{children:"Retries goals, skips failed steps, logs errors"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-configuration-options",children:"\u2699\ufe0f Configuration Options"}),"\n",(0,t.jsxs)(n.p,{children:["In ",(0,t.jsx)(n.code,{children:"mission_manager.py"})," or launch params:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Default"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"waypoints"})}),(0,t.jsx)(n.td,{children:"List of (x, y, yaw) navigation goals"}),(0,t.jsx)(n.td,{children:"See nav_handler"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"base_pose"})}),(0,t.jsx)(n.td,{children:"Coordinates of drop zone / home"}),(0,t.jsx)(n.td,{children:"Set in pose_setter"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"object_class_filter"})}),(0,t.jsx)(n.td,{children:"Only trigger on specific detected classes"}),(0,t.jsx)(n.td,{children:"None"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"confidence_threshold"})}),(0,t.jsx)(n.td,{children:"Minimum YOLO confidence to trigger"}),(0,t.jsx)(n.td,{children:"0.7"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"nav_goal_timeout"})}),(0,t.jsx)(n.td,{children:"Seconds to wait for navigation before skipping"}),(0,t.jsx)(n.td,{children:"10"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"pick_timeout"})}),(0,t.jsx)(n.td,{children:"Seconds to wait for pick operation before skipping"}),(0,t.jsx)(n.td,{children:"15"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"drop_timeout"})}),(0,t.jsx)(n.td,{children:"Seconds to wait for drop operation before skipping"}),(0,t.jsx)(n.td,{children:"15"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-sample-output--logs",children:"\ud83d\udcdc Sample Output & Logs"}),"\n",(0,t.jsxs)(d.A,{children:[(0,t.jsx)(c.A,{value:"normal",label:"Normal Run",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"[mission_manager]: \ud83d\udfe2 Exploration started.\r\n[mission_manager]: \ud83d\ude80 Navigating to waypoint: (0.37, -0.10, -13.3\xb0)\r\n[mission_manager]: \ud83d\udcf8 Object detected: bottle (conf=0.85) at (1.25, -0.45)\r\n[mission_manager]: \u23f9 Interrupting navigation for object pickup.\r\n[mission_manager]: \ud83d\ude80 Navigating to: (1.25, -0.45)\r\n[mission_manager]: \ud83e\udd16 Pick successful.\r\n[mission_manager]: \ud83d\ude97 Returning to base: (1.95, -9.86)\r\n[mission_manager]: \ud83d\udce6 Drop successful.\r\n[mission_manager]: \ud83d\udd04 Resuming waypoint navigation.\n"})})}),(0,t.jsx)(c.A,{value:"error",label:"Error Handling",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"[mission_manager]: \ud83d\udcf8 Object detected: bottle (conf=0.62) \u2014 below threshold, ignoring.\r\n[mission_manager]: \u274c Navigation goal timed out \u2014 skipping to next waypoint.\r\n[mission_manager]: \u274c Pick failed \u2014 resuming exploration.\n"})})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-integration-points",children:"\ud83e\udde9 Integration Points"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"From"}),(0,t.jsx)(n.th,{children:"To"}),(0,t.jsx)(n.th,{children:"Data / Action"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Object Detector"}),(0,t.jsx)(n.td,{children:"Mission Manager"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"/target_pose"})," (PoseStamped)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Mission Manager"}),(0,t.jsx)(n.td,{children:"Nav2"}),(0,t.jsx)(n.td,{children:"NavigateToPose action goal"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Mission Manager"}),(0,t.jsx)(n.td,{children:"Pick/Drop Nodes"}),(0,t.jsx)(n.td,{children:"Service/Topic trigger"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Nav2"}),(0,t.jsx)(n.td,{children:"Mission Manager"}),(0,t.jsx)(n.td,{children:"Action feedback/result"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udee0 Troubleshooting"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Issue"}),(0,t.jsx)(n.th,{children:"Possible Cause"}),(0,t.jsx)(n.th,{children:"Solution"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Ignores detections"}),(0,t.jsx)(n.td,{children:"Class filter or confidence threshold too high"}),(0,t.jsx)(n.td,{children:"Lower threshold in config"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Doesn't resume waypoints after pick"}),(0,t.jsx)(n.td,{children:"Missing resume logic"}),(0,t.jsx)(n.td,{children:"Check mission_manager code path"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Navigation never cancels on detect"}),(0,t.jsx)(n.td,{children:"Cancel action call not working"}),(0,t.jsx)(n.td,{children:"Ensure correct Nav2 cancel API usage"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Mission stuck in pick/drop"}),(0,t.jsx)(n.td,{children:"Pick/Drop nodes not returning completion flag"}),(0,t.jsx)(n.td,{children:"Debug pick/drop node logic"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-learn-more",children:"\ud83d\udcda Learn More"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.ros.org/en/foxy/Tutorials/Understanding-ROS2-Actions.html",children:"ROS2 Actions Tutorial"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://navigation.ros.org/tutorials/docs/navigation2_with_keepout_filter.html",children:"Nav2 Waypoint Following"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://wiki.ros.org/smach",children:"Finite State Machines in Robotics"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-next-steps",children:"\ud83c\udfaf Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/limo_cobot_documentation/docs/core-concepts/system-integration",children:"System Integration"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/limo_cobot_documentation/docs/system-components/pick-node",children:"Pick & Drop Node"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/limo_cobot_documentation/docs/system-components/object-detection-node",children:"Object Detection Node"})}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(j,{...e})}):j(e)}}}]);