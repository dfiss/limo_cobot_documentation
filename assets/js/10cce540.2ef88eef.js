"use strict";(self.webpackChunklimo_cobot_documentation=self.webpackChunklimo_cobot_documentation||[]).push([[8988],{10326:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"advanced-usage/custom-maps","title":"\ud83d\uddfa Advanced Usage \u2014 Custom Maps","description":"This section explains how to create, customize, and optimize maps for your LIMO robot using RTAB-Map or Cartographer, so navigation is more precise and exploration covers your environment efficiently.","source":"@site/docs/advanced-usage/custom-maps.md","sourceDirName":"advanced-usage","slug":"/advanced-usage/custom-maps","permalink":"/limo_cobot_documentation/docs/advanced-usage/custom-maps","draft":false,"unlisted":false,"editUrl":"https://github.com/krish-rRay23/limo_cobot_documentation/tree/main/docs/advanced-usage/custom-maps.md","tags":[],"version":"current","lastUpdatedBy":"Krish Ray","lastUpdatedAt":1754645088000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Monitoring","permalink":"/limo_cobot_documentation/docs/usage-guide/monitoring"},"next":{"title":"\ud83c\udfaf Advanced Usage \u2014 Custom Objects","permalink":"/limo_cobot_documentation/docs/advanced-usage/custom-objects"}}');var r=a(74848),s=a(28453),o=a(11470),l=a(19365),t=a(27293);const c={sidebar_position:1},d="\ud83d\uddfa Advanced Usage \u2014 Custom Maps",h={},p=[{value:"\ud83e\udde9 Why Custom Maps?",id:"-why-custom-maps",level:2},{value:"\ud83d\uddfa RTAB-Map Customization",id:"-rtab-map-customization",level:2},{value:"\ud83e\udded Cartographer Configuration",id:"-cartographer-configuration",level:2},{value:"\ud83d\udd8c Map Editing &amp; Optimization",id:"-map-editing--optimization",level:2},{value:"\ud83c\udfd7 Creating a Custom Map from Scratch",id:"-creating-a-custom-map-from-scratch",level:2},{value:"1. Prepare Environment",id:"1-prepare-environment",level:3},{value:"2. Launch Mapping Tool",id:"2-launch-mapping-tool",level:3},{value:"3. Drive Methodically",id:"3-drive-methodically",level:3},{value:"4. Save &amp; Optimize",id:"4-save--optimize",level:3},{value:"5. Update Launch File",id:"5-update-launch-file",level:3}];function m(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"-advanced-usage--custom-maps",children:"\ud83d\uddfa Advanced Usage \u2014 Custom Maps"})}),"\n",(0,r.jsxs)(n.p,{children:["This section explains how to ",(0,r.jsx)(n.strong,{children:"create, customize, and optimize maps"})," for your LIMO robot using ",(0,r.jsx)(n.strong,{children:"RTAB-Map"})," or ",(0,r.jsx)(n.strong,{children:"Cartographer"}),", so navigation is more precise and exploration covers your environment efficiently."]}),"\n","\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-why-custom-maps",children:"\ud83e\udde9 Why Custom Maps?"}),"\n",(0,r.jsxs)(n.p,{children:["Your robot's ",(0,r.jsx)(n.strong,{children:"navigation precision"})," directly depends on the quality of its map.",(0,r.jsx)(n.br,{}),"\n","Custom maps allow you to:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Adapt to new environments."}),"\n",(0,r.jsx)(n.li,{children:"Remove clutter and unnecessary details."}),"\n",(0,r.jsxs)(n.li,{children:["Fine-tune navigation for ",(0,r.jsx)(n.strong,{children:"tight spaces"})," and ",(0,r.jsx)(n.strong,{children:"complex layouts"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Improve ",(0,r.jsx)(n.strong,{children:"localization stability"})," for Nav2."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-rtab-map-customization",children:"\ud83d\uddfa RTAB-Map Customization"}),"\n",(0,r.jsxs)(o.A,{children:[(0,r.jsxs)(l.A,{value:"record",label:"1. Record a Map",children:[(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch rtabmap_ros rtabmap.launch.py \\\r\n   use_sim_time:=false \\\r\n   rgb_topic:=/camera/color/image_raw \\\r\n   depth_topic:=/camera/depth/image_raw \\\r\n   camera_info_topic:=/camera/color/camera_info \\\r\n   frame_id:=base_link\n"})}),(0,r.jsx)(n.p,{children:"Drive the robot manually via:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run teleop_twist_keyboard teleop_twist_keyboard\n"})}),(0,r.jsx)(n.p,{children:"Save the map:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run nav2_map_server map_saver_cli -f ~/maps/my_room\n"})})]}),(0,r.jsxs)(l.A,{value:"customize",label:"2. Customize Map Settings",children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Edit ",(0,r.jsx)(n.code,{children:"rtabmap"})," parameters:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Grid/CellSize"})})," \u2192 smaller for higher resolution."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Optimizer/Strategy"})})," \u2192 ",(0,r.jsx)(n.code,{children:"1"})," for TORO, ",(0,r.jsx)(n.code,{children:"2"})," for G2O (better loop closure)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"RGBD/LoopClosureThreshold"})})," \u2192 adjust for more aggressive relocalization."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Save parameters in:"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"~/.ros/rtabmap.ini\n"})})]}),(0,r.jsxs)(l.A,{value:"optimize",label:"3. Optimize After Mapping",children:[(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"rtabmap-databaseViewer"})," to:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Remove ghost points."}),"\n",(0,r.jsx)(n.li,{children:"Merge duplicate nodes."}),"\n",(0,r.jsx)(n.li,{children:"Manually close loops for better accuracy."}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"rtabmap-databaseViewer ~/.ros/rtabmap.db\n"})})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-cartographer-configuration",children:"\ud83e\udded Cartographer Configuration"}),"\n",(0,r.jsxs)(o.A,{children:[(0,r.jsx)(l.A,{value:"launch",label:"1. Launch Cartographer",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch limo_bringup limo_cartographer.launch.py \\\r\n   use_sim_time:=false \\\r\n   configuration_basename:=limo_cartographer.lua\n"})})}),(0,r.jsxs)(l.A,{value:"edit",label:"2. Key Parameters",children:[(0,r.jsxs)(n.p,{children:["Edit your ",(0,r.jsx)(n.code,{children:".lua"})," config:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"TRAJECTORY_BUILDER_2D.min_range"})," / ",(0,r.jsx)(n.code,{children:"max_range"})]})," \u2014 adjust for sensor range."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"POSE_GRAPH.optimize_every_n_nodes"})})," \u2014 lower for faster optimization."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"MAP_RESOLUTION"})})," \u2014 lower value for higher detail."]}),"\n"]})]}),(0,r.jsx)(l.A,{value:"save",label:"3. Save Map",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run nav2_map_server map_saver_cli -f ~/maps/my_cartographer_map\n"})})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-map-editing--optimization",children:"\ud83d\udd8c Map Editing & Optimization"}),"\n",(0,r.jsx)(n.p,{children:"You can clean and modify maps for better navigation:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Remove noise & artifacts"})," using GIMP or Photoshop."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fill small gaps"}),' in walls to prevent Nav2 from "cutting corners."']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Remove furniture"})," if it has been moved since mapping."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ensure the robot's starting location"})," (from pose_setter.py) is in a free space."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Example cleanup workflow:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install gimp\r\ngimp ~/maps/my_room.pgm\n"})}),"\n",(0,r.jsx)(n.p,{children:"Edit \u2192 Save \u2192 Update .yaml metadata file with correct resolution and origin."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-creating-a-custom-map-from-scratch",children:"\ud83c\udfd7 Creating a Custom Map from Scratch"}),"\n",(0,r.jsx)(n.h3,{id:"1-prepare-environment",children:"1. Prepare Environment"}),"\n",(0,r.jsx)(n.p,{children:"Remove unnecessary obstacles; ensure good lighting for vision-based SLAM."}),"\n",(0,r.jsx)(n.h3,{id:"2-launch-mapping-tool",children:"2. Launch Mapping Tool"}),"\n",(0,r.jsx)(n.p,{children:"Choose RTAB-Map or Cartographer as above."}),"\n",(0,r.jsx)(n.h3,{id:"3-drive-methodically",children:"3. Drive Methodically"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cover every area."}),"\n",(0,r.jsx)(n.li,{children:"Rotate at intersections for loop closure."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-save--optimize",children:"4. Save & Optimize"}),"\n",(0,r.jsx)(n.p,{children:"Clean the .pgm, update .yaml, and store in ~/maps/."}),"\n",(0,r.jsx)(n.h3,{id:"5-update-launch-file",children:"5. Update Launch File"}),"\n",(0,r.jsx)(n.p,{children:"Point Nav2 to your new map:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 launch limo_bringup limo_nav2.launch.py map:=/home/agilex/maps/my_room.yaml\n"})}),"\n",(0,r.jsx)(t.A,{type:"tip",title:"Pro Tip",children:(0,r.jsxs)(n.p,{children:["If your environment changes often, create ",(0,r.jsx)(n.strong,{children:"multiple maps"})," for different configurations and switch them depending on the task."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Next: \ud83d\udccd Customizing Waypoints"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}}}]);