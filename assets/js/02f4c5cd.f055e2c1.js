"use strict";(self.webpackChunklimo_cobot_documentation=self.webpackChunklimo_cobot_documentation||[]).push([[6278],{38723:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>h,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>t,toc:()=>m});const t=JSON.parse('{"id":"advanced-usage/custom-objects","title":"\ud83c\udfaf Advanced Usage \u2014 Custom Objects","description":"This section explains how to change the robot\'s object detection targets by creating custom datasets, training your own YOLO model, and optimizing detection performance for your LIMO system.","source":"@site/docs/advanced-usage/custom-objects.md","sourceDirName":"advanced-usage","slug":"/advanced-usage/custom-objects","permalink":"/limo_cobot_documentation/docs/advanced-usage/custom-objects","draft":false,"unlisted":false,"editUrl":"https://github.com/krish-rRay23/limo_cobot_documentation/tree/main/docs/advanced-usage/custom-objects.md","tags":[],"version":"current","lastUpdatedBy":"Krish Ray","lastUpdatedAt":1754645088000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\uddfa Advanced Usage \u2014 Custom Maps","permalink":"/limo_cobot_documentation/docs/advanced-usage/custom-maps"},"next":{"title":"\ud83d\udccd Advanced Usage \u2014 Waypoint Management","permalink":"/limo_cobot_documentation/docs/advanced-usage/waypoint-management"}}');var a=s(74848),i=s(28453),o=s(11470),c=s(19365),r=s(27293);const l={sidebar_position:2},d="\ud83c\udfaf Advanced Usage \u2014 Custom Objects",h={},m=[{value:"\ud83d\udee0 Changing Object Detection Classes",id:"-changing-object-detection-classes",level:2},{value:"\ud83d\udcf8 Custom Dataset Creation",id:"-custom-dataset-creation",level:2},{value:"1. Collect Images",id:"1-collect-images",level:3},{value:"2. Annotate",id:"2-annotate",level:3},{value:"3. Organize Dataset",id:"3-organize-dataset",level:3},{value:"\ud83e\udde0 Model Training Procedures",id:"-model-training-procedures",level:2},{value:"\u26a1 Detection Optimization",id:"-detection-optimization",level:2},{value:"Confidence Threshold (<code>conf</code>)",id:"confidence-threshold-conf",level:3},{value:"Image Size",id:"image-size",level:3},{value:"Model Variant",id:"model-variant",level:3},{value:"GPU Acceleration",id:"gpu-acceleration",level:3},{value:"Class Filtering",id:"class-filtering",level:3},{value:"\ud83e\uddea Testing Your Model",id:"-testing-your-model",level:2}];function g(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"-advanced-usage--custom-objects",children:"\ud83c\udfaf Advanced Usage \u2014 Custom Objects"})}),"\n",(0,a.jsxs)(n.p,{children:["This section explains how to change the robot's object detection targets by creating ",(0,a.jsx)(n.strong,{children:"custom datasets"}),", training your own YOLO model, and optimizing detection performance for your LIMO system."]}),"\n","\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-changing-object-detection-classes",children:"\ud83d\udee0 Changing Object Detection Classes"}),"\n",(0,a.jsxs)(n.p,{children:["Your YOLO detector (",(0,a.jsx)(n.code,{children:"object_detector.py"}),") currently loads a custom model:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'self.model = YOLO("/home/agilex/krish_ws/runs/detect/mycobot_final2/weights/best.pt")\n'})}),"\n",(0,a.jsx)(n.p,{children:"To change classes:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Train a new YOLO model with your desired objects."}),"\n",(0,a.jsxs)(n.li,{children:["Replace the ",(0,a.jsx)(n.code,{children:".pt"})," file path in the detector node."]}),"\n",(0,a.jsxs)(n.li,{children:["Ensure ",(0,a.jsx)(n.code,{children:"self.model.names"})," contains the correct class labels."]}),"\n",(0,a.jsx)(n.li,{children:"Restart the system to load the new model."}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\ud83d\udca1 ",(0,a.jsx)(n.strong,{children:"Note"}),": If you only want to filter detections to certain classes, you can check ",(0,a.jsx)(n.code,{children:"cls_name"})," inside the YOLO callback and ignore others."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-custom-dataset-creation",children:"\ud83d\udcf8 Custom Dataset Creation"}),"\n",(0,a.jsx)(n.h3,{id:"1-collect-images",children:"1. Collect Images"}),"\n",(0,a.jsx)(n.p,{children:"Use the LIMO's camera:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_image_view rqt_image_view\n"})}),"\n",(0,a.jsx)(n.p,{children:"Take screenshots or record video, then extract frames."}),"\n",(0,a.jsx)(n.h3,{id:"2-annotate",children:"2. Annotate"}),"\n",(0,a.jsx)(n.p,{children:"Use LabelImg or Label Studio:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"labelImg /path/to/images classes.txt\n"})}),"\n",(0,a.jsx)(n.p,{children:"Export format: YOLO TXT format (one file per image)."}),"\n",(0,a.jsx)(n.h3,{id:"3-organize-dataset",children:"3. Organize Dataset"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"dataset/\r\n \u251c\u2500\u2500 images/\r\n \u2502    \u251c\u2500\u2500 train/\r\n \u2502    \u251c\u2500\u2500 val/\r\n \u251c\u2500\u2500 labels/\r\n \u2502    \u251c\u2500\u2500 train/\r\n \u2502    \u251c\u2500\u2500 val/\r\n \u2514\u2500\u2500 data.yaml\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Example ",(0,a.jsx)(n.code,{children:"data.yaml"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'train: /absolute/path/to/dataset/images/train\r\nval: /absolute/path/to/dataset/images/val\r\nnc: 3\r\nnames: ["objectA", "objectB", "objectC"]\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-model-training-procedures",children:"\ud83e\udde0 Model Training Procedures"}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(c.A,{value:"python",label:"Train in Python",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from ultralytics import YOLO\r\n\r\nmodel = YOLO("yolov8n.pt")  # or yolov8s.pt for more accuracy\r\nmodel.train(\r\n    data="/path/to/data.yaml",\r\n    epochs=50,\r\n    imgsz=640,\r\n    batch=16,\r\n    device=0  # GPU ID\r\n)\n'})})}),(0,a.jsx)(c.A,{value:"cli",label:"Train via CLI",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"yolo detect train data=/path/to/data.yaml model=yolov8n.pt epochs=50 imgsz=640 batch=16 device=0\n"})})})]}),"\n",(0,a.jsx)(n.p,{children:"After training, your weights will be at:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"runs/detect/trainX/weights/best.pt\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Update the ",(0,a.jsx)(n.code,{children:"object_detector.py"})," model path to this file."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-detection-optimization",children:"\u26a1 Detection Optimization"}),"\n",(0,a.jsxs)(n.h3,{id:"confidence-threshold-conf",children:["Confidence Threshold (",(0,a.jsx)(n.code,{children:"conf"}),")"]}),"\n",(0,a.jsx)(n.p,{children:"Increase to reduce false positives."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"results = self.model.predict(source=color_img, conf=0.6, verbose=False)\n"})}),"\n",(0,a.jsx)(n.h3,{id:"image-size",children:"Image Size"}),"\n",(0,a.jsx)(n.p,{children:"Larger sizes improve accuracy, but increase inference time."}),"\n",(0,a.jsx)(n.h3,{id:"model-variant",children:"Model Variant"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"yolov8n.pt"})," \u2192 fastest, least accurate."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"yolov8s.pt"})," \u2192 balanced."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"yolov8m.pt"})," \u2192 most accurate, slower."]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"gpu-acceleration",children:"GPU Acceleration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"export CUDA_VISIBLE_DEVICES=0\n"})}),"\n",(0,a.jsx)(n.h3,{id:"class-filtering",children:"Class Filtering"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'if cls_name not in ["target_class"]:\r\n    return\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-testing-your-model",children:"\ud83e\uddea Testing Your Model"}),"\n",(0,a.jsx)(n.p,{children:"After swapping the model:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 run object_detector yolo_detector\n"})}),"\n",(0,a.jsx)(n.p,{children:"Look for:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\u2705 YOLO detector node initialized with synchronized inputs.\r\n[\ud83d\udccd DETECTED] target_class 2D(320,240) 3D(0.42, 0.15, 0.80)\n"})}),"\n",(0,a.jsx)(n.p,{children:"Verify:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Bounding boxes appear correctly in ",(0,a.jsx)(n.code,{children:"/yolo/annotated"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"/target_pose"})," publishes when your target is detected."]}),"\n"]}),"\n",(0,a.jsx)(r.A,{type:"tip",title:"Pro Tip",children:(0,a.jsxs)(n.p,{children:["If detection is unstable, collect ",(0,a.jsx)(n.strong,{children:"more diverse training images"})," with different lighting, angles, and distances."]})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Next: \ud83d\udccd Customizing Waypoints"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}}}]);